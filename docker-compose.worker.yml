# NOTE: This docker-compose.yml is meant to be just an example of how
# you could accomplish this on your own. It is not intended to work in
# all use-cases and must be adapted to fit your needs. This is merely
# a guideline.

# See docs.getsentry.com/on-premise/server/ for full
# instructions

version: '3.4'

x-defaults: &defaults
  restart: unless-stopped
  build:
    context: .
    args:
      IMAGE: ${IMAGE}
  env_file: .env
  volumes:
    - sentry-data:/var/lib/sentry/files

services:
  worker:
    <<: *defaults
    command: run worker -c 4

volumes:
    sentry-data:
